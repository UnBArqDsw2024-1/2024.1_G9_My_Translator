# GoF Comportamental - Chain of Responsibility

## 1. Introdução

Em Orientação a Objetos, Chain of Responsibility é um padrão GOF cuja principal função é evitar a dependência entre um objeto receptor e um objeto solicitante. Consiste em uma série de objetos receptores e de objetos de solicitação, onde cada objetos de solicitação possui uma lógica interna que separa quais são tipos de objetos receptores que podem ser manipulados. O restante é passado para o próximo objetos de solicitação da cadeia.

## 2. Objetivo

No processo de tradução dentro da aplicação, o texto traduzido pode ser ter como fonte a entrada do usuário ou um arquivo. Deste modo, cada manipulador é responsável por um tipo específico de entrada. Por exemplo, um manipulador pode processar o texto diretamente inserido pelo usuário, enquanto outro manipulador pode processar o arquivo enviado.

## 3. Diagrama

<center>
  <figure>
    <figcaption>Figura 1: Diagrama de Classes utilizando o padrão comportamental Chains of Responsibility. Fonte: Daniel Oda</figcaption>
  </figure>
</center>
<img src="./img/gof-comportamental-chain.png" >
<center>
  <figure>
    <figcaption>Autores: Francisco Mizael, Daniel Oda</figcaption>
  </figure>
</center>

## 4. Código
```python
class Handler:
    def __init__(self):
        self.next_handler = None

    def set_next(self, handler):
        self.next_handler = handler
        return handler

    def handle(self, request):
        if self.next_handler:
            return self.next_handler.handle(request)
        return None

class TextHandler(Handler):
    def handle(self, request):
        if isinstance(request, fromText):
            if request.action == "translate":
                # Process text translation
                return "Translated Text"
            elif request.action == "word_meaning":
                # Process word meaning lookup
                return WordMeaningHandler().handle(request)
        else:
            return super().handle(request)

class FileHandler(Handler):
    def handle(self, request):
        if isinstance(request, fromFile):
            if request.action == "translate":
                # Process file translation
                return "Translated File"
            elif request.action == "word_meaning":
                # Process word meaning lookup
                return WordMeaningHandler().handle(request)
        else:
            return super().handle(request)

class TranslateHandler(Handler):
    def handle(self, request):
        if isinstance(request, Translate):
            if request.action == "translate":
                # General translation handling
                return "General Translation"
            elif request.action == "word_meaning":
                # Process word meaning lookup
                return WordMeaningHandler().handle(request)
        else:
            return super().handle(request)

class WordMeaningHandler(Handler):
    def handle(self, request):
        if request.action == "word_meaning":
            # Process dictionary lookup
            return f"Meaning of {request.word}"
        else:
            return super().handle(request)

# Classes de Request
class Request:
    def __init__(self, action, word=None):
        self.action = action
        self.word = word

class fromText(Request):
    pass

class fromFile(Request):
    pass

class Translate(Request):
    pass

# Montando a cadeia de responsabilidade
text_handler = TextHandler()
file_handler = FileHandler()
translate_handler = TranslateHandler()

text_handler.set_next(file_handler).set_next(translate_handler)

# Enviando solicitações
print(text_handler.handle(fromText(action="translate")))            # Output: "Translated Text"
print(text_handler.handle(fromText(action="word_meaning", word="example")))  # Output: "Meaning of example"
print(text_handler.handle(fromFile(action="translate")))            # Output: "Translated File"
print(text_handler.handle(fromFile(action="word_meaning", word="example")))  # Output: "Meaning of example"
print(text_handler.handle(Translate(action="translate")))           # Output: "General Translation"
print(text_handler.handle(Translate(action="word_meaning", word="example"))) # Output: "Meaning of example"
```

## Referências

> **Arquitetura e Desenho de Software - Aula GoFs Comportamentais**. Material de apoio em slides. Milene Serrano.

## Versionamento
| Versão |   Data   |                           Alteração                           |                                        Participantes                                         |
| :----: | :------: |:-------------------------------------------------------------:|:--------------------------------------------------------------------------------------------:|
|  1.0   | 25/07/24 |                     Criação do documento                      |                                            [Daniel Oda](https://github.com/danieloda/) |



